<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>WhatsApp Clone</title>

    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#008069">

    <link rel="stylesheet" href="style.css">
</head>

<body oncontextmenu="return false;">

    <div id="login-screen">
        <div class="login-box">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/WhatsApp.svg/120px-WhatsApp.svg.png"
                width="80" alt="Logo" style="margin-bottom:20px;">
            <h2 class="login-title">WhatsApp Clone</h2>
            <p class="login-desc">Masuk untuk mulai & kirim media.</p>

            <button id="btn-google-login" class="btn-google-login">
                <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" width="20" alt="G">
                Masuk dengan Google
            </button>

            <button id="btn-install-login" class="btn-install-login">
                ğŸ“² Install Aplikasi
            </button>
        </div>
    </div>

    <div id="app-screen" class="app-container">

        <aside class="sidebar">
            <header class="header-left">
                <div class="my-profile-area" id="btn-my-profile">
                    <img src="https://via.placeholder.com/50" id="my-avatar-img" class="my-avatar-img" alt="Saya">
                    <div class="my-info-container">
                        <span id="my-display-name" class="my-display-name">Loading...</span>
                        <span id="my-bio-text" class="my-bio-text">...</span>
                    </div>
                </div>
                <div class="header-actions">
                    <div class="uid-badge-container" id="btn-copy-uid" title="Salin UID">
                        <span class="uid-text">UID: <span id="my-uid-text">...</span> â</span>
                    </div>
                    <button class="icon-btn" id="btn-theme" title="Ganti Tema">â—‘</button>
                    <button class="icon-btn logout-btn" id="btn-logout" title="Keluar">â‹</button>
                </div>
            </header>

            <div class="search-bar-container">
                <div class="search-input-wrapper">
                    <input type="text" id="search-contact" class="search-input" placeholder="Cari Nama atau UID...">

                    <button id="btn-add-uid" class="search-btn" title="Tambah Teman via UID"
                        style="padding:0 12px; font-size:18px;">+</button>
                </div>
            </div>

            <div id="contact-list" class="contact-list"></div>
            <button id="btn-anon-fab" class="anon-fab" title="Cari Teman Random">ğŸ•µï¸</button>

            <div id="anon-popup" class="anon-popup hidden">
                <div class="anon-content">
                    <h3>Anonymous Chat</h3>
                    <div id="anon-status" class="anon-status">Siap mencari teman baru?</div>

                    <div id="anon-loader" class="anon-loader hidden">
                        <div class="spinner"></div>
                        <p>Mencari Stranger...</p>
                    </div>

                    <div class="anon-actions">
                        <button id="btn-anon-start" class="btn-primary">Start</button>
                        <button id="btn-anon-cancel" class="btn-secondary hidden">Cancel</button>
                        <button id="btn-anon-close" class="btn-text">Tutup</button>
                    </div>
                </div>
            </div>

            <button id="btn-anon-stop" class="btn-stop-anon hidden">Stop</button>
        </aside>

        <main class="chat-area">

            <div id="welcome-screen" class="welcome-screen">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/WhatsApp.svg/120px-WhatsApp.svg.png"
                    width="80" style="opacity:0.5; margin-bottom:20px;">
                <h3>Pilih teman untuk memulai chat</h3>
            </div>

            <header class="header-right" id="chat-header" style="visibility:hidden;">
                <div class="back-btn" id="btn-back-mobile">â†</div>
                <div class="chat-info-wrapper">
                    <img src="https://via.placeholder.com/50" id="friend-avatar-img" class="my-avatar-img">
                    <div>
                        <div id="friend-name-text" class="friend-name">Nama Teman</div>
                        <div id="friend-bio-text" class="friend-bio">Online</div>
                    </div>
                </div>
                <button class="icon-btn" id="btn-expiry-timer" title="Pesan Sementara">â±ï¸</button>
            </header>

            <div id="messages-box" class="messages-container"></div>

            <div class="footer-wrapper" id="chat-footer-wrapper" style="visibility:hidden;">

                <div id="reply-preview" class="reply-preview-bar">
                    <div style="flex:1;">
                        <div class="reply-label">Membalas ke <span id="reply-to-name">...</span></div>
                        <div id="reply-to-text" class="reply-content">...</div>
                    </div>
                    <button id="btn-cancel-reply" class="close-btn">&times;</button>
                </div>

                <div class="chat-footer">

                    <div id="emoji-picker-container" class="emoji-picker hidden">
                        <div class="emoji-header">ğŸ•’ Terbaru</div>
                        <div id="emoji-recent" class="emoji-grid"></div>
                        <div class="emoji-header">ğŸ˜€ Semua Emoji</div>
                        <div id="emoji-list" class="emoji-grid"></div>
                    </div>

                    <div id="attach-menu" class="attach-menu hidden">
                        <div id="trigger-doc" class="attach-item">
                            <span class="attach-icon" style="background:#7f66ff;">ğŸ“„</span> Dokumen
                        </div>
                        <div id="trigger-cam" class="attach-item">
                            <span class="attach-icon" style="background:#d3396d;">ğŸ“·</span> Galeri / Kamera
                        </div>
                    </div>

                    <input type="file" id="file-input-doc" hidden>
                    <input type="file" id="file-input-media" hidden accept="image/*,video/*">

                    <button class="btn-media" id="btn-toggle-emoji" title="Emoji">ğŸ˜€</button>

                    <button class="btn-media" id="btn-toggle-attach" title="Lampiran"
                        style="font-weight:bold;">â•</button>

                    <div class="chat-input-container">
                        <input type="text" id="msg-input" class="chat-input" placeholder="Ketik pesan..."
                            autocomplete="off">
                    </div>

                    <button id="btn-send" class="btn-send-mic hidden">â¤</button>
                    <button id="btn-mic" class="btn-send-mic">ğŸ¤</button>
                </div>
            </div>
        </main>
    </div>

    <div id="contact-menu-overlay" class="overlay" style="z-index: 90;"></div>

    <div id="msg-overlay" class="overlay" style="z-index: 499;"></div>

    <div id="msg-option-menu" class="msg-options">
        <button class="msg-btn" id="opt-reply">â†©ï¸ Balas</button>
        <button class="msg-btn" id="opt-edit">âœï¸ Edit Pesan</button>
        <button class="msg-btn delete-text" id="opt-delete">ğŸ—‘ï¸ Hapus</button>
    </div>

    <div id="profile-modal" class="modal">
        <div class="modal-content">
            <h3>Edit Profil Saya</h3>
            <div class="avatar-edit-wrapper">
                <img id="preview-avatar" src="https://via.placeholder.com/80">
                <label for="file-input-avatar" class="avatar-edit-icon">ğŸ“·</label>
            </div>
            <input type="file" id="file-input-avatar" hidden accept="image/*">

            <input type="text" id="edit-name" class="modal-input" placeholder="Nama Tampilan">
            <input type="text" id="edit-bio" class="modal-input" placeholder="Bio / Info">

            <div class="modal-actions">
                <button id="btn-cancel-profile" class="btn-secondary">Batal</button>
                <button id="btn-save-profile" class="btn-primary">Simpan</button>
            </div>
        </div>
    </div>

    <div id="expiry-modal" class="modal">
        <div class="modal-content">
            <h3>â±ï¸ Pesan Sementara</h3>
            <p style="font-size:13px; color:var(--text-secondary); margin-bottom:20px;">Pilih durasi pesan otomatis
                hilang:</p>
            <div class="expiry-options" style="text-align:left; display:flex; flex-direction:column; gap:10px;">
                <div class="expiry-item" data-val="24"
                    style="padding:10px; border:1px solid #eee; border-radius:8px; cursor:pointer;">ğŸ•’ 24 Jam</div>
                <div class="expiry-item" data-val="168"
                    style="padding:10px; border:1px solid #eee; border-radius:8px; cursor:pointer;">ğŸ“… 7 Hari</div>
                <div class="expiry-item" data-val="720"
                    style="padding:10px; border:1px solid #eee; border-radius:8px; cursor:pointer;">ğŸ—“ï¸ 30 Hari</div>
                <div class="expiry-item" data-val="0"
                    style="padding:10px; border:1px solid #eee; border-radius:8px; cursor:pointer;">âŒ Mati (Off)</div>
            </div>
            <button id="btn-close-expiry" class="btn-text" style="width:100%; margin-top:20px;">Tutup</button>
        </div>
    </div>

    <script type="module" src="logic.js"></script>

</body>

</html>

